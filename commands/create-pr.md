# Generate PR Description

Creates comprehensive pull request descriptions using repository templates or best practices.

## Workflow

### 1. Identify Target PR

```bash
# Check current branch for PR
gh pr view --json number,title,state 2>/dev/null

# If no PR on current branch, list available
gh pr list --limit 10 --json number,title,headRefName,author
```

Ask user which PR to describe if multiple options exist.

### 2. Gather PR Context

```bash
# Get PR metadata
gh pr view {number} --json url,title,baseRefName,headRefName

# Get changes
gh pr diff {number}

# Get commit history
gh pr view {number} --json commits
```

**If repository not set:** User must run `gh repo set-default`

### 3. Analyze Changes

- Read the complete diff
- Identify change categories:
  - Features added
  - Bugs fixed
  - Breaking changes
  - Performance improvements
  - Refactoring
- Note user-facing vs internal changes
- Check for migration requirements

### 4. Load Template (if exists)

```bash
# Check for PR template
cat .github/pull_request_template.md 2>/dev/null
```

### 5. Generate Description

**With Template:** Fill each section based on analysis
**Without Template:** Use standard format:

```markdown
## Summary

[What problem does this solve? Why was this change needed?]

## Changes

- [Primary change with impact]
- [Secondary changes]

## Type of Change

- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## Testing

- [ ] Tests pass locally
- [ ] Added tests for new functionality
- [ ] Existing tests updated

## Breaking Changes

[List any breaking changes or "None"]

## Screenshots

[If UI changes, add before/after or "N/A"]

## Additional Notes

[Context, decisions, or follow-up needed]
```

### 6. Run Verification (if possible)

```bash
# Common verification commands
npm test
cargo test
go test ./...
pytest
make test
just test
```

Mark completed checks: `- [x]`  
Leave manual tests unchecked: `- [ ] Manual UI testing required`

### 7. Update PR

```bash
# Save description
echo "[description]" > pr_description.md

# Update PR
gh pr edit {number} --body-file pr_description.md

# Confirm update
gh pr view {number}
```

## Key Principles

**DO:**

- ✅ Focus on WHY changes were made
- ✅ Highlight user impact first
- ✅ Group related changes
- ✅ Run automated tests when possible
- ✅ Note migration steps clearly

**DON'T:**

- ❌ List every file changed
- ❌ Duplicate commit messages
- ❌ Skip breaking change warnings
- ❌ Leave template sections empty
- ❌ Include "Generated by Claude" or similar attribution

## Repository Variations

| Template Location                  | Fallback Order      |
| ---------------------------------- | ------------------- |
| `.github/pull_request_template.md` | Primary             |
| `.github/PULL_REQUEST_TEMPLATE.md` | Alternative         |
| `docs/pull_request_template.md`    | Legacy              |
| None found                         | Use standard format |

## Common Sections to Address

- **Problem/Solution** - What issue does this resolve?
- **Implementation** - How was it solved?
- **Testing** - How was it verified?
- **Impact** - Who/what is affected?
- **Follow-up** - What comes next?

Remember: Good PR descriptions accelerate reviews. Be thorough but scannable.
